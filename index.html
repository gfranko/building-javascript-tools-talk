<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Building JavaScript Tools</title>
    <link rel="stylesheet" href="styles/styles.css"/>
  </head>
  <body>
    <article>
      <section>
        <h1>Building JavaScript Tools</h1>
        <h5>Greg Franko</h5>
        <hr>
        <hr>
        <h6>2/12/2014</h6>
        <hr>
        <h4>Use arrow keys to navigate</h4>
      </section>
      <section>
        <h2>About The Speaker</h2>
        <hr><img src="images/gregfranko.png" class="profile-pic">
        <hr>
        <h3><strong>Greg Franko</strong></h3>
        <h3>JavaScript Engineer at AddThis</h3>
        <h3>Open Source Developer</h3>
        <h3>Author</h3>
        <h3>Speaker</h3>
      </section>
      <section>
        <h2>What Types of Tools Are We Talking About?</h2>
      </section>
      <section>
        <h1>Static Code Analysis</h1>
      </section>
      <section>
        <h2>What Do These Tools Typically Do?</h2>
      </section>
      <section>
        <h2><a href="http://tobyho.com/2013/12/02/fun-with-esprima/" target="_blank">Analyze Code</a></h2>
        <h4>Performance, Maintainability, Validation</h4>
      </section>
      <section>
        <h2><a href="http://constellation.github.io/escodegen/demo/index.html" target="_blank">Generate Code For</a></h2>
        <h4>Transpilers, Minifiers, Visualizers</h4>
      </section>
      <section>
        <h2>Could You Provide Some Examples?</h2>
      </section>
      <section>
        <h2><a href="http://lisperator.net/uglifyjs/" target="_blank">UglifyJS</a></h2>
        <h4>Compressor/Minifier That Reduces The Size Of Your JS Code</h4>
      </section>
      <section>
        <h2><a href="http://jshint.com/" target="_blank">JSHint</a></h2>
        <h4>Helps Detect Problems In Your JS Code Before It Is Too Late</h4>
      </section>
      <section>
        <h2><a href="http://jshint.com/" target="_blank">CSS Lint</a></h2>
        <h4>Helps Detect Problems In Your CSS Code Before It Is Too Late</h4>
      </section>
      <section>
        <h2><a href="http://coffeescript.org/" target="_blank">CoffeeScript</a></h2>
        <h4>Language That Compiles To JavaScript</h4>
      </section>
      <section>
        <h2><a href="https://github.com/es-analysis/plato" target="_blank">Plato</a></h2>
        <h4>Code Complexity Visualizations</h4>
      </section>
      <section>
        <h2><a href="http://requirejs.org/docs/optimization.html" target="_blank">RequireJS Optimizer</a></h2>
        <h4>Concatenates AMD Projects Into A Single File</h4>
      </section>
      <section>
        <h2><a href="http://gregfranko.com/amdclean/" target="_blank">AMDClean</a></h2>
        <h4>Converts AMD code To Standard JavaScript</h4>
      </section>
      <section>
        <h2><a href="http://browserify.org/" target="_blank">Browserify</a></h2>
        <h4>Concatenates CommonJS Projects Into A Single File For The Browser</h4>
      </section>
      <section>
        <h2>Have You Used A Static Code Analysis Tool?</h2>
        <h4>You Probably Have</h4>
      </section>
      <section>
        <h2>Have You Written A Static Code Analysis Tool?</h2>
        <h4>You Probably Haven't</h4>
      </section>
      <section>
        <h1>Why Not?</h1>
        <ul>
          <li></li>
          <li>
            <h3>I have a theory...</h3>
          </li>
        </ul>
      </section>
      <section>
        <h2>You Don't Know Where To Start</h2>
      </section>
      <section>
        <h1>Let's Change That</h1>
      </section>
      <section>
        <h2>Static Code Analysis Basics</h2>
        <h3>Let's Learn</h3>
      </section>
      <section>
        <h2>It Starts With A String Of Code</h2>
        <hr>
        <pre><code class="language-javascript">var code = 'function jqcon() {}';
</code></pre>
      </section>
      <section>
        <h2>That Is Converted To An Object</h2>
        <pre class="long-javascript"><code class="language-javascript">{
  "type": "FunctionDeclaration",
  "id": {
    "type": "Identifier",
    "name": "jqcon"
  },
  "params": [],
  "body": {
    "type": "BlockStatement",
    "body": []
  },
  "expression": false
}
</code></pre>
        <h4>This Object Is Called an Abstract Syntax Tree (AST)</h4>
      </section>
      <section>
        <h2><a href="http://en.wikipedia.org/wiki/Abstract_syntax_tree" target="_blank">Abstract Syntax Tree</a></h2>
        <ul>
          <li></li>
          <li>
            <h3>An Object (Tree) That Represents The Structure Of Your Code</h3>
          </li>
          <li>
            <h3>Does Not Store Everything - It is <strong>abstract</strong></h3>
            <h4>e.g. Does not store that a JS function starts/ends with open/close curly brackets</h4>
          </li>
          <li>
            <h3>Can Be Traversed and Updated</h3>
          </li>
        </ul>
      </section>
      <section>
        <h2>Common AST Questions</h2>
        <ul>
          <li></li>
          <li>
            <h3>When Would I Ever Use An AST?</h3>
            <h4>Whenever you want to analyze your code</h4>
          </li>
          <li>
            <h3>Couldn't I Just Use Regular Expressions?</h3>
            <h4>Pattern matching will only get you so far. It is also notoriously ugly to read.</h4>
          </li>
          <li>
            <h3>How Do I Generate An AST?</h3>
            <h4>By Using A Parser Library (or writing your own parser)</h4>
          </li>
        </ul>
      </section>
      <section>
        <h1>Let's Generate an AST!</h1>
      </section>
      <section>
        <h2><a href="http://esprima.org/" target="_blank">Esprima</a></h2>
        <ul>
          <li></li>
          <li>
            <h3>JavaScript Parser That Generates ASTs</h3>
          </li>
          <li>
            <h3>Can Be Used In A Node.js Or Web Environment</h3>
          </li>
          <li>
            <h3>Adheres To The <a href='https://developer.mozilla.org/en-US/docs/SpiderMonkey/Parser_API' target='_blank'>Mozilla SpiderMonkey Parser API</a></h3>
          </li>
          <li>
            <h3>Created by <a href='https://github.com/ariya' target='_blank'>Ariya Hidayat</a></h3>
          </li>
        </ul>
      </section>
      <section>
        <h2>Generating An AST With Esprima</h2>
        <pre><code class="language-javascript">// Node.js Environment
var code = 'function jqcon() {}',
  esprima = require('esprima'),
  ast = esprima.parse(code);
  </code></pre>
        <h3>That's All There Is To Creating An AST</h3><a target="_blank" href="http://requirebin.com/?gist=8939628" class="requirebin-link"><img src="images/requirebin_badge.png"></a>
      </section>
      <section>
        <h1>Awesome, It Works!</h1>
        <hr>
        <h3><strong>ASTs Are So Cool</strong></h3>
        <ul>
          <li></li>
          <li>
            <h3>But I Still Have A Few Questions About Esprima...</h3>
          </li>
        </ul>
      </section>
      <section>
        <h2>Common Esprima Questions</h2>
        <ul>
          <li></li>
          <li>
            <h3>Do I Have To Use Esprima?</h3>
            <h4>No, there are alternatives out there. A popular alternative is <a href='http://marijnhaverbeke.nl/acorn/' target='_blank'>Acorn</a></h4>
          </li>
          <li>
            <h3>Why Does Esprima Adhere To The Mozilla SpiderMonkey Parser API?</h3>
            <h4>Because the SpiderMonkey Parse API is recognized by the community as a standard for structured JS representation (and many other tools adhere to it as well)</h4>
          </li>
        </ul>
      </section>
      <section>
        <h1>What Now?</h1>
        <hr>
        <ul>
          <li></li>
          <li>
            <h3>Now That We Have Generated Our AST...</h3>
          </li>
          <li>
            <h2>Let's Traverse and Update It!</h2>
          </li>
        </ul>
      </section>
      <section>
        <h2><a href="https://github.com/Constellation/estraverse" target="_blank">Estraverse</a></h2>
        <ul>
          <li></li>
          <li>
            <h3>JavaScript Library That Provides AST Traversal and Update Methods</h3>
          </li>
          <li>
            <h3>Can Be Used In A Node.js Or Web Environment</h3>
          </li>
          <li>
            <h3>Adheres To The <a href='https://developer.mozilla.org/en-US/docs/SpiderMonkey/Parser_API' target='_blank'>Mozilla SpiderMonkey Parser API</a></h3>
          </li>
          <li>
            <h3>Created by <a href='https://github.com/Constellation' target='_blank'>Yusuke Suzuki</a></h3>
          </li>
        </ul>
      </section>
      <section>
        <h2>Traversing An AST With Estraverse</h2>
        <pre class="long-javascript"><code class="language-javascript">// Node.js Environment
var code = 'function jqcon() {}',
  esprima = require('esprima'),
  ast = esprima.parse(code),
  estraverse = require('estraverse');
  
estraverse.traverse(ast, {
  enter: function (node, parent) {},
  leave: function(node, parent) {}
});
</code></pre><a target="_blank" href="http://requirebin.com/?gist=8941318" class="requirebin-link"><img src="images/requirebin_badge.png"></a>
      </section>
      <section>
        <h2>Traversing And Updating An AST With Estraverse</h2>
        <pre class="long-javascript"><code class="language-javascript">estraverse.traverse(ast, {
  enter: function (node, parent) {
    if(node.type === 'Identifier' && node.name === 'jqcon') {
      // Changes the 'jqcon' function name to 'jqcon_is_awesome'
      node.name = node.name + '_is_awesome';  
    }
  },
});
</code></pre><a target="_blank" href="http://requirebin.com/?gist=8945438" class="requirebin-link"><img src="images/requirebin_badge.png"></a>
      </section>
      <section>
        <h2>You Could Also Use the Estraverse.replace() Method...</h2>
      </section>
      <section>
        <h2>Traversing And Updating An AST With Estraverse</h2>
        <pre class="long-javascript"><code class="language-javascript">estraverse.replace(ast, {
  enter: function (node, parent) {
    if(node.type === 'Identifier' && node.name === 'jqcon') {
      // Changes the 'jqcon' function name to 'jqcon_is_awesome'
      return { 'type': 'Identifier', 'name': 'jqcon_is_awesome' };
    }
  }
});
</code></pre><a target="_blank" href="http://requirebin.com/?gist=8945281" class="requirebin-link"><img src="images/requirebin_badge.png"></a>
      </section>
      <section>
        <h1>Awesome, It Works!</h1>
        <hr>
        <h3><strong>Traversing and Updating ASTs Is Fun</strong></h3>
        <ul>
          <li></li>
          <li>
            <h3>But I Still Have A Few Questions About Estraverse...</h3>
          </li>
        </ul>
      </section>
      <section>
        <h2>Common Estraverse Questions</h2>
        <ul>
          <li></li>
          <li>
            <h3>Do I Have To Use Estraverse?</h3>
            <h4>No, there are alternatives out there. A popular alternative is <a href='https://github.com/jrfeenst/esquery' target='_blank'>esquery</a></h4>
          </li>
          <li>
            <h3>But Couldn't I Traverse And Update The AST Myself?</h3>
            <h4>You could, but traversing ASTs is tricky since not all AST child nodes have a unified interface.
              <h5>e.g. <code>VariableDeclaration</code> has nested children nodes within a <a href='https://developer.mozilla.org/en-US/docs/SpiderMonkey/Parser_API#Declarations' target='_blank'>declarations</a> property, while an <code>IfStatement</code> has nested children within a <a href='https://developer.mozilla.org/en-US/docs/SpiderMonkey/Parser_API#Statements' target='_blank'>consequent</a> property.</h5>
            </h4>
          </li>
        </ul>
      </section>
      <section>
        <h1>Let's Review</h1>
        <ul>
          <li></li>
          <li>
            <h3>Use <a href='http://esprima.org/' target='_blank'>Esprima</a> To Generate An AST From Code</h3>
          </li>
          <li>
            <h3>Use <a href='https://github.com/Constellation/estraverse' target='_blank'>Estraverse</a> To Traverse And Update That AST</h3>
          </li>
        </ul>
      </section>
      <section>
        <h1>What Now?</h1>
        <hr>
        <ul>
          <li></li>
          <li>
            <h3>Now That We Have Generated, Traversed, and Updated Our AST...</h3>
          </li>
          <li>
            <h2>Let's Generate Code!</h2>
          </li>
        </ul>
      </section>
      <section>
        <h2><a href="https://github.com/Constellation/escodegen" target="_blank">Escodegen</a></h2>
        <ul>
          <li></li>
          <li>
            <h3>JavaScript Library That Generates Code From An AST</h3>
          </li>
          <li>
            <h3>Can Be Used In A Node.js Or Web Environment</h3>
          </li>
          <li>
            <h3>Adheres To The <a href='https://developer.mozilla.org/en-US/docs/SpiderMonkey/Parser_API' target='_blank'>Mozilla SpiderMonkey Parser API</a></h3>
          </li>
          <li>
            <h3>Created by <a href='https://github.com/Constellation' target='_blank'>Yusuke Suzuki</a></h3>
          </li>
        </ul>
      </section>
      <section>
        <h2>Generating Code From An AST With Escodegen</h2>
        <pre class="long-javascript"><code class="language-javascript">// Node.js Environment
var code = 'function jqcon() {}',
  esprima = require('esprima'),
  ast = esprima.parse(code),
  escodegen = require('escodegen'),
  // Returns a string of code represented by the AST
  regenerated_code = escodegen.parse(ast);
  </code></pre><a target="_blank" href="http://jsbin.com/vupar/2/edit" class="jsbin-link">View On JSBin</a>
      </section>
      <section>
        <h1>Amazing!</h1>
        <hr>
        <h3><strong>Generating Code From An AST Is Hot</strong></h3>
        <ul>
          <li></li>
          <li>
            <h3>But I Still Have A Few Questions About Escodegen...</h3>
          </li>
        </ul>
      </section>
      <section>
        <h2>Common Escodegen Questions</h2>
        <ul>
          <li></li>
          <li>
            <h3>Do I Have To Use Escodegen?</h3>
            <h4>Good question. I'm not sure of a good alternative.  Anyone in the audience know?</h4>
          </li>
          <li>
            <h3>But Couldn't I Write an AST Code Generator Myself?</h3>
            <h4>You could. I'll see you next year, when you're finished.</h4>
          </li>
        </ul>
      </section>
      <section>
        <h1>Let's Review</h1>
        <ul>
          <li></li>
          <li>
            <h3>Use <a href='http://esprima.org/' target='_blank'>Esprima</a> To Generate An AST From Code</h3>
          </li>
          <li>
            <h3>Use <a href='https://github.com/Constellation/estraverse' target='_blank'>Estraverse</a> To Traverse And Update That AST</h3>
          </li>
          <li>
            <h3>Use <a href='https://github.com/Constellation/escodegen' target='_blank'>Escodegen</a> To Generate Code From That Ast</h3>
          </li>
        </ul>
      </section>
      <section>
        <h2>Wrap Up Questions</h2>
        <ul>
          <li></li>
          <li>
            <h3>Your Examples Are Kind Of Simple. Got Anything More Complex?</h3>
            <h4>Yep, check out the AMDClean <a href='http://gregfranko.com/amdclean/' target='_blank'>website</a> and <a href='https://github.com/gfranko/amdclean/blob/master/src/amdclean.js' target='_blank'>source</a></h4>
          </li>
          <li>
            <h3>You Didn't Cover CSS Static Analysis.  What Gives?</h3>
            <h4>Not enough time my friend. But I created an <a href='http://requirebin.com/?gist=8910801' target='_blank'>example</a> that you can look at later.</h4>
          </li>
          <li>
            <h3>Are There Any More Resources You Would Recommend?</h3>
            <h4>Yes, the Esprima <a href='http://esprima.org/demo/parse.html' target='_blank'>Parser Demo</a> and the Mozilla SpiderMonkey <a href='' target='_blank'>Parser API</a> will be your best friends. You current best friends will understand.</h4>
          </li>
        </ul>
      </section>
      <section>
        <h1>Thanks!</h1>
        <hr>
        <h3><strong>Twitter: </strong><a href='https://twitter.com/GregFranko' target='_blank'>GregFranko</a></h3>
        <h3><strong>Github: </strong><a href='https://github.com/gfranko' target='_blank'>gfranko</a></h3>
      </section>
    </article>
    <script src="scripts/scripts.js"></script>
  </body>
</html>