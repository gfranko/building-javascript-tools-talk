<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Building JavaScript Tools</title>
    <link rel="stylesheet" href="styles/styles.css"/>
  </head>
  <body>
    <article>
      <section>
        <h1>Building JavaScript Tools</h1>
        <h5>Greg Franko</h5>
        <hr>
        <hr>
        <h6>2/12/2014</h6>
      </section>
      <section>
        <h2>About The Speaker</h2>
        <hr><img src="images/gregfranko.png" class="profile-pic">
        <hr>
        <h3><strong>Greg Franko</strong></h3>
        <h3>JavaScript Engineer at AddThis</h3>
        <h3>Open Source Developer</h3>
        <h3>Author</h3>
        <h3>Speaker</h3>
      </section>
      <section>
        <h2>What Types of Tools Are We Talking About?</h2>
      </section>
      <section>
        <h1>Static Code Analysis</h1>
      </section>
      <section>
        <h2>What Do These Tools Typically Do?</h2>
      </section>
      <section>
        <h2><a href="http://tobyho.com/2013/12/02/fun-with-esprima/" target="_blank">Analyze Code</a></h2>
        <h4>Performance, Maintainability, Validation</h4>
      </section>
      <section>
        <h2><a href="http://constellation.github.io/escodegen/demo/index.html" target="_blank">Generate Code</a></h2>
        <h4>Transpilers, Minifiers, Visualizers</h4>
      </section>
      <section>
        <h2>Could You Provide Some Examples?</h2>
      </section>
      <section>
        <h2><a href="http://lisperator.net/uglifyjs/" target="_blank">UglifyJS</a></h2>
        <h4>Compressor/Minifier That Reduces The Size Of Your JS Code</h4>
      </section>
      <section>
        <h2><a href="http://jshint.com/" target="_blank">JSHint</a></h2>
        <h4>Helps Detect Problems In Your JS Code Before It Is Too Late</h4>
      </section>
      <section>
        <h2><a href="http://jshint.com/" target="_blank">CSS Lint</a></h2>
        <h4>Helps Detect Problems In Your CSS Code Before It Is Too Late</h4>
      </section>
      <section>
        <h2><a href="http://coffeescript.org/" target="_blank">CoffeeScript</a></h2>
        <h4>Language That Compiles To JavaScript</h4>
      </section>
      <section>
        <h2><a href="https://github.com/es-analysis/plato" target="_blank">Plato</a></h2>
        <h4>Code Complexity Visualizations</h4>
      </section>
      <section>
        <h2><a href="http://requirejs.org/docs/optimization.html" target="_blank">RequireJS Optimizer</a></h2>
        <h4>Concatenates AMD Projects Into A Single File</h4>
      </section>
      <section>
        <h2><a href="http://gregfranko.com/amdclean/" target="_blank">AMDClean</a></h2>
        <h4>Converts AMD code To Standard JavaScript</h4>
      </section>
      <section>
        <h2><a href="http://browserify.org/" target="_blank">Browserify</a></h2>
        <h4>Concatenates CommonJS Projects Into A Single File For The Browser</h4>
      </section>
      <section>
        <h2>Have You Used A Static Code Analysis Tool?</h2>
        <h4>You Probably Have</h4>
      </section>
      <section>
        <h2>Have You Written A Static Code Analysis Tool?</h2>
        <h4>You Probably Haven't</h4>
      </section>
      <section>
        <h1>Why Not?</h1>
        <ul>
          <li></li>
          <li>
            <h3>I have a theory...</h3>
          </li>
        </ul>
      </section>
      <section>
        <h2>You Don't Know Where To Start</h2>
      </section>
      <section>
        <h1>Let's Change That</h1>
      </section>
      <section>
        <h2>Static Code Analysis Basics</h2>
        <h3>Let's Learn</h3>
      </section>
      <section>
        <h2>It Starts With A String Of Code</h2>
        <hr>
        <pre><code class="language-javascript">var code = 'function jqcon() {}';
</code></pre>
      </section>
      <section>
        <h2>That Is Converted To An Object</h2>
        <pre class="long-javascript"><code class="language-javascript">{
  "type": "FunctionDeclaration",
  "id": {
    "type": "Identifier",
    "name": "jqcon"
  },
  "params": [],
  "body": {
    "type": "BlockStatement",
    "body": []
  },
  "expression": false
}
</code></pre>
        <h4>This Object Is Called an Abstract Syntax Tree (AST)</h4>
      </section>
      <section>
        <h2><a href="http://en.wikipedia.org/wiki/Abstract_syntax_tree" target="_blank">Abstract Syntax Tree</a></h2>
        <ul>
          <li></li>
          <li>
            <h3>An Object (Tree) That Represents The Structure Of Your Code</h3>
          </li>
          <li>
            <h3>Does Not Store Everything - It is <strong>abstract</strong></h3>
            <h4>e.g. Does not store that a JS function starts/ends with open/close curly brackets</h4>
          </li>
          <li>
            <h3>Can Be Traversed and Updated</h3>
          </li>
        </ul>
      </section>
      <section>
        <h2>Common AST Questions</h2>
        <ul>
          <li></li>
          <li>
            <h3>When Would I Ever Use An AST?</h3>
            <h4>Whenever you want to analyze your code</h4>
          </li>
          <li>
            <h3>Couldn't I Just Use Regular Expressions?</h3>
            <h4>Pattern matching will only get you so far. It is also notoriously ugly to read.</h4>
          </li>
          <li>
            <h3>How Do I Generate An AST?</h3>
            <h4>By Using A Parser Library (or writing your own parser)</h4>
          </li>
        </ul>
      </section>
      <section>
        <h1>Let's Generate an AST!</h1>
      </section>
      <section>
        <h2><a href="http://esprima.org/" target="_blank">Esprima</a></h2>
        <ul>
          <li></li>
          <li>
            <h3>JavaScript Parser That Generates ASTs</h3>
          </li>
          <li>
            <h3>Can Be Used In A Node.js Or Web Environment</h3>
          </li>
          <li>
            <h3>Adheres To The <a href='https://developer.mozilla.org/en-US/docs/SpiderMonkey/Parser_API' target='_blank'>Mozilla SpiderMonkey Parser API</a></h3>
          </li>
          <li>
            <h3>Was Created by <a href='https://github.com/ariya' target='_blank'>Ariya Hidayat</a></h3>
          </li>
        </ul>
      </section>
      <section>
        <h2>Generating An AST With Esprima</h2>
        <pre><code class="language-javascript">// Node.js Environment
var code = 'function jqcon() {}',
  esprima = require('esprima'),
  ast = esprima.parse(code);
  </code></pre>
        <h3>That's All There Is To Creating An AST</h3><a target="_blank" href="http://requirebin.com/?gist=8939628" class="requirebin-link"><img src="http://requirebin.com/badge.png"></a>
      </section>
      <section>
        <h1>Awesome, It Works!</h1>
        <hr>
        <h3><strong>ASTs Are So Cool</strong></h3>
        <ul>
          <li></li>
          <li>
            <h3>But I Still Have A Few Questions About Esprima...</h3>
          </li>
        </ul>
      </section>
      <section>
        <h2>Common Esprima Questions</h2>
        <ul>
          <li></li>
          <li>
            <h3>Do I Have To Use Esprima?</h3>
            <h4>No, there are alternatives out there. A popular alternative is <a href='http://marijnhaverbeke.nl/acorn/' target='_blank'>Acorn</a></h4>
          </li>
          <li>
            <h3>Why Does Esprima AdHere to the Mozilla SpiderMonkey Parser API?</h3>
            <h4>Because the SpiderMonkey Parse API is recognized by the community as a standard for structured JS representation (and many other tools adhere to it as well)</h4>
          </li>
        </ul>
      </section>
      <section>
        <h1>What Now?</h1>
        <hr>
        <ul>
          <li></li>
          <li>
            <h3>Now That We Have Generated Our AST...</h3>
          </li>
          <li>
            <h2>Let's Traverse It!</h2>
          </li>
        </ul>
      </section>
      <section>
        <h2><a href="http://esprima.org/" target="_blank">Estraverse</a></h2>
        <ul>
          <li></li>
          <li>
            <h3>JavaScript Library That Provides AST Traversal Methods</h3>
          </li>
          <li>
            <h3>Can Be Used In A Node.js Or Web Environment</h3>
          </li>
          <li>
            <h3>Adheres To The <a href='https://developer.mozilla.org/en-US/docs/SpiderMonkey/Parser_API' target='_blank'>Mozilla SpiderMonkey Parser API</a></h3>
          </li>
          <li>
            <h3>Was Created by <a href='https://github.com/Constellation' target='_blank'>Yusuke Suzuki</a></h3>
          </li>
        </ul>
      </section>
      <section>
        <h2>Traversing An AST With Estraverse</h2>
        <pre class="long-javascript"><code class="language-javascript">// Node.js Environment
var code = 'function jqcon() {}',
  esprima = require('esprima'),
  ast = esprima.parse(code),
  estraverse = require('estraverse');
  
estraverse.traverse(ast, {
  enter: function (node, parent) {
  }
});
</code></pre><a target="_blank" href="http://requirebin.com/?gist=8941318" class="requirebin-link"><img src="http://requirebin.com/badge.png"></a>
      </section>
      <section>
        <h2>If<a href="https://github.com/amdjs/amdjs-api/wiki/AMD#define-function-" target="_blank">define</a>
          <d>Is Confusing You...</d>
        </h2>
        <ul>
          <li></li>
          <li>
            <h3>Let's See How It Would Look In Plain JavaScript</h3>
          </li>
          <li>
            <pre><code class="language-javascript">var example = function() {
  return 'No dependencies, returns a string';
}();
</code></pre>
          </li>
        </ul>
      </section>
      <section>
        <h2><a href="https://github.com/amdjs/amdjs-api/wiki/AMD#define-function-" target="_blank">define(id?, dependencies?, factory)</a></h2>
        <ul>
          <li>
            <h3>Let's Look At A Slightly More Complicated Example</h3>
          </li>
          <li>
            <pre><code class="language-javascript">// getUser.js
// Depends on a file (users.js), and returns a getUser function
define(['./users'], function(users) {
  return function getUser(username) {
    return users[username];
  };
});
</code></pre>
          </li>
        </ul>
      </section>
      <section>
        <h2>If<a href="https://github.com/amdjs/amdjs-api/wiki/AMD#define-function-" target="_blank">define</a>
          <d>Is Still Confusing...</d>
        </h2>
        <ul>
          <li></li>
          <li>
            <h3>Let's See How It Would Look In Plain JavaScript</h3>
          </li>
          <li>
            <pre><code class="language-javascript">var getUser = function(users) {
  return function getUser(username) {
    return users[username];
  };
}(usersCollection);
</code></pre>
          </li>
        </ul>
      </section>
      <section>
        <h1>Is That It?</h1>
        <hr>
        <ul>
          <li></li>
          <li>
            <h3>Nope, There Are Many Ways To Define an AMD Module</h3>
          </li>
          <li>
            <h3>Check Out More<a href="http://requirejs.org/docs/api.html#define" target="_blank">Module Definitions</a></h3>
          </li>
        </ul>
      </section>
      <section>
        <h2><a href="https://github.com/amdjs/amdjs-api/wiki/require" target="_blank">require(Array, Function)</a></h2>
        <ul>
          <li></li>
          <li>
            <h3>Loads One Or More AMD Modules</h3>
          </li>
          <li>
            <pre><code class="language-javascript">// Loads the example.js module from our first define() example
require(['./example.js'], function(exampleText) {
  // Prints: 'example.js return value: No dependencies, returns a string'
  console.log('example.js return value: ', exampleText);
})</code></pre>
          </li>
          <li>
            <h3>That's All There Is To The <code>require()</code> Method</h3>
          </li>
        </ul>
      </section>
      <section>
        <h2>Should I Use <code>define</code> or <code>require</code>?</h2>
        <hr>
        <ul>
          <li></li>
          <li>
            <h2><strong>You Should Use Both</strong></h2>
          </li>
          <li>
            <h3>Use <code>define</code> to wrap logic that you would like to re-use somewhere else in your application</h3>
          </li>
          <li>
            <h3>Use <code>require</code> when you just want a dependency to be loaded onto the page.</h3>
          </li>
        </ul>
      </section>
      <section>
        <h1>Now What?</h1>
        <hr>
        <ul>
          <li></li>
          <li>
            <h3>Now That You Understand How To Create And Load AMD Modules...</h3>
          </li>
          <li>
            <h3>Let Me Answer Your Question With A Question</h3>
          </li>
          <li>
            <h3><strong>Have You Ever Used JavaScript Code That You Didn't Write?</strong></h3>
          </li>
        </ul>
      </section>
      <section>
        <h1>Third Party Libraries</h1>
        <hr>
        <ul>
          <li></li>
          <li>
            <h3><strong>Cannot</strong> Assume AMD Is Being Used</h3>
          </li>
          <li>
            <h3><strong>Can</strong> Still Provide Conditional Support</h3>
          </li>
        </ul>
      </section>
      <section>
        <h2>How Would A Third Party Library Provide AMD Support?</h2>
        <hr>
        <ul>
          <li></li>
          <li>
            <h3>By Conditionally Wrapping Itself in a <code>define</code> method</h3>
            <pre><code class="language-javascript">// If an AMD compatible loader is on the page
if ( typeof define === "function" && define.amd ) {
    define([], function() {
        return exampleLib;
    });
}
</code></pre>
          </li>
        </ul>
      </section>
      <section>
        <h1>Third Party Examples</h1>
      </section>
      <section>
        <h1>jQuery</h1>
        <hr>
        <h3>Provides AMD Support via a <strong>Named AMD module</strong></h3>
        <ul>
          <li>
            <pre><code class="language-javascript">// jQuery Source
if ( typeof define === "function" && define.amd ) {
    define( "jquery", [], function() {
        return jQuery;
    });
}
</code></pre>
          </li>
        </ul>
      </section>
      <section>
        <h1>Lodash</h1>
        <hr>
        <h3>Provides AMD Support via an <strong>Anonymous AMD module</strong></h3>
        <ul>
          <li>
            <pre><code class="language-javascript">// Lodash Source
if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {
  root._ = _;
  
  define(function() {
    return _;
  });
}
</code></pre>
          </li>
        </ul>
      </section>
      <section>
        <h1>Backbone</h1>
        <hr>
        <h3>Does <strong>Not</strong> Provide AMD Support<a href="https://github.com/jashkenas/backbone/commit/ab5d2eb4c657ed81e80ac815f687e94a2cb55fef" target="_blank">yet</a></h3>
        <ul>
          <li>
            <pre><code class="language-javascript">// Backbone Source
var Backbone;
if (typeof exports !== 'undefined') {
  Backbone = exports;
} else {
  Backbone = root.Backbone = {};
}
</code></pre>
          </li>
        </ul>
      </section>
      <section>
        <h2>How Do You Use Scripts That Are Not AMD Compatible?</h2>
        <hr>
        <ul>
          <li></li>
          <li>
            <h3>Use the RequireJS<a href="http://requirejs.org/docs/api.html#config-shim" target="_blank">Shim Configuration</a></h3>
          </li>
        </ul>
      </section>
      <section>
        <h2><a href="http://requirejs.org/docs/api.html#config-shim" target="_blank">Shim Configuration</a></h2>
        <hr>
        <h3>Useful for libraries that export a global variable</h3>
        <pre><code class="language-javascript">requirejs.config({
  shim: {
    'backbone': {
        deps: ['underscore', 'jquery'],
        exports: 'Backbone'
    }
  }
});
</code></pre>
      </section>
      <section>
        <h2>Is This Black Magic?</h2>
        <hr>
        <ul>
          <li></li>
          <li>
            <h3>No, RequireJS just creates a <code>define</code> wrapper for all shimmed libraries</h3>
          </li>
          <li>
            <pre><code class="language-javascript">define("backbone", ["underscore","jquery"], (function (global) {
    return function () {
        var ret, fn;
        return ret || global.Backbone;
    };
}(this)));
</code></pre>
          </li>
        </ul>
      </section>
      <section>
        <h2><a href="http://requirejs.org/docs/api.html#config-shim" target="_blank">Shim Configuration</a></h2>
        <hr>
        <h3>Also Useful for Declaring Dependencies</h3>
        <pre><code class="language-javascript">require.config({
  shim: {
    'jquery.ui.widget': ['jquery'],
    
    'jquery.selectBoxIt': ['jquery.ui.widget']
  }
});
</code></pre>
      </section>
      <section>
        <h1>Hold Up</h1>
        <hr>
        <ul>
          <li></li>
          <li>
            <h3>Can You Explain The <code>require.config()</code> Method?</h3>
          </li>
        </ul>
      </section>
      <section>
        <h2>RequireJS<a href="http://requirejs.org/docs/api.html#config" target="_blank">Config</a></h2>
        <hr>
        <ul>
          <li></li>
          <li>
            <h3>RequireJS allows you to set application-level configuration options</h3>
          </li>
          <li>
            <h3>The configuration options should be set <strong>before</strong> you define/require any modules</h3>
          </li>
        </ul>
      </section>
      <section>
        <h2>Popular<a href="http://requirejs.org/docs/api.html#config" target="_blank">Config Options</a></h2>
        <hr>
        <ul>
          <li></li>
          <li>
            <h3><a href="http://requirejs.org/docs/api.html#config-baseUrl" target="_blank">baseurl</a></h3>
            <The>The beginning file path that is used for all of the file lookups</The>
          </li>
          <li>
            <h3><a href="http://requirejs.org/docs/api.html#config-paths" target="_blank">paths</a></h3>
            <Allows>Allows you to map module IDs to alias names (easier to type <code>'jquery'</code> than <code>'../../jquery</code>')</Allows>
          </li>
          <li>
            <h3><a href="http://requirejs.org/docs/api.html#config-shim" target="_blank">shim</a></h3>
            <Allows>Allows you to make third-party libraries AMD compatible</Allows>
          </li>
        </ul>
      </section>
      <section>
        <h1>Let's Review</h1>
        <ul>
          <li></li>
          <li>
            <h3><code>Define()</code> allows you to create AMD modules</h3>
          </li>
          <li>
            <h3><code>Require()</code> allows you to load one or more AMD modules onto the page</h3>
          </li>
          <li>
            <h3>RequireJS configuration options provide flexibility and convenience</h3>
          </li>
          <li>
            <h3><strong>Last but not least...</strong></h3>
          </li>
        </ul>
      </section>
      <section>
        <h2>Building with<a href="http://requirejs.org/docs/optimization.html" target="_blank">The RequireJS Optimizer</a></h2>
      </section>
      <section>
        <h1><a href="http://requirejs.org/docs/optimization.html" target="_blank">The RequireJS Optimizer</a></h1>
        <hr>
        <ul>
          <li></li>
          <li>
            <h3>Node.js Command-Line Build Tool</h3>
          </li>
          <li>
            <h3>Concatenates Your AMD Project Into One File</h3>
          </li>
          <li>
            <h3>A Ton Of<a href="https://github.com/jrburke/r.js/blob/master/build/example.build.js#L527" target="_blank">Options</a></h3>
          </li>
          <li>
            <h3>Can Be Used with Grunt or Gulp</h3>
          </li>
        </ul>
      </section>
      <section>
        <h2>Example Build Profile</h2>
        <pre><code class="language-javascript">{
  baseUrl: "public/js/",
  paths: {
    "desktop": "app/config/Init"
  },
  optimize: "uglify",
  mainConfigFile: "public/js/app/config/Init.js",
  include: ["desktop"],
  out: "public/js/app/config/Init.min.js"
}
</code></pre>
      </section>
      <section>
        <h2>Common Optimizer Questions</h2>
        <ul>
          <li></li>
          <li>
            <h3>I thought RequireJS Didn't Require A Build Step?</h3>
            <h4>It doesn't, the optimizer is optional.</h4>
          </li>
          <li>
            <h3>Why Would I use the RequireJS Optimizer?</h3>
            <h4>If you want to build your project into one file</h4>
          </li>
          <li>
            <h3>Do I Still Need RequireJS After I Build?</h3>
            <h4>If you need to load any additional network resources with RequireJS, then yes.  Otherwise, you may use <a href='https://github.com/jrburke/almond/blob/master/almond.js' target='_blank'>Almond.js</a> or <a href='https://github.com/gfranko/amdclean' target='_blank'>AMDClean.js</a>.</h4>
          </li>
        </ul>
      </section>
      <section>
        <h2><a href="https://github.com/jrburke/almond" target="_blank">Almond.js</a></h2>
        <ul>
          <li></li>
          <li>
            <h3>A Minimal (~400 line) RequireJS Replacement After Optimized Builds</h3>
          </li>
          <li>
            <h3>Does Not Allow Loading Network Resources</h3>
          </li>
          <li>
            <h3>Does Not Transform Source Code</h3>
          </li>
          <li><a href="https://github.com/BoilerplateMVC/Backbone-Require-Boilerplate-Lite/blob/master/Gruntfile.js" target="_blank">Example Build With Almond.js</a></li>
        </ul>
      </section>
      <section>
        <h2><a href="http://gregfranko.com/amdclean/" target="_blank">AMDClean.js</a></h2>
        <ul>
          <li></li>
          <li>
            <h3>An AMD Build Tool That Converts AMD Code To Standard JavaScript</h3>
          </li>
          <li>
            <h3>Allows You To Use AMD In Development Without Having To Include an AMD Library In Production</h3>
          </li>
          <li>
            <h3>Does Not Allow Loading Network Resources</h3>
          </li>
          <li>
            <h3>Transforms Source Code</h3>
          </li>
          <li><a href="https://github.com/BoilerplateMVC/Backbone-Require-Boilerplate/blob/master/Gruntfile.js" target="_blank">Example Build With AMDClean.js</a></li>
        </ul>
      </section>
      <section>
        <h2>For A Complete Example, Check Out:</h2>
        <hr>
        <h2><a href="https://github.com/BoilerplateMVC/Backbone-Require-Boilerplate" target="_blank">Backbone-Require-Boilerplate</a></h2>
      </section>
      <section>
        <h2>Additional Topics That May Interest You</h2>
        <hr>
        <h3>Browserify vs RequireJS</h3>
        <h3>Using CommonJS syntax with RequireJS</h3>
        <h3>ES6 Modules and The Future</h3>
      </section>
      <section>
        <h1>Thanks!</h1>
        <hr>
        <h3><strong>Twitter: </strong><a href='https://twitter.com/GregFranko' target='_blank'>GregFranko</a></h3>
        <h3><strong>Github: </strong><a href='https://github.com/gfranko' target='_blank'>gfranko</a></h3>
      </section>
    </article>
    <script src="scripts/scripts.js"></script>
  </body>
</html>